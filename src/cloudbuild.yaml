steps:
  # Step 1: Checkout the repository
  - name: 'gcr.io/cloud-builders/git'
    args: ['clone', 'https://github.com/p1yushsharma/jj.git']

  # Step 2: Build the application with Maven (specify a version tag)
  - name: 'gcr.io/cloud-builders/maven:3.8.4'  # Use a specific version instead of 'latest'
    args: ['clean', 'package', '-DskipTests']

  # Step 3: Deploy to App Engine
  - name: 'gcr.io/google.com/cloudsdktool/cloud-sdk'
    args:
      - 'gcloud'
      - 'app'
      - 'deploy'
      - '--quiet'

options:
  logging: CLOUD_LOGGING_ONLY  # Enable Cloud Logging

# Timeout settings (optional)
timeout: 1600s

# Substitutions for dynamic variables (optional)
substitutions:
  _PROJECT_ID: 'vigilant-quanta-442411-q8'
  _REGION: 'us-central1'
